var data = {};

(function() {

data.parties = [{name: "democrat", speeches: ["\nJOSÉ LUIS RODRÍGUEZ ZAPATERO:  Muchas gracias, señor presidente. La verdad es que el Gobierno no decide absolutamente nada sobre los centros de decisión de las cajas. El Gobierno procura ser escrupulosamente respetuoso con los procesos que las cajas decidan. El Gobierno entiende que los gobiernos de las comunidades autónomas también deben ser respetuosos con los procesos que se producen en el ámbito de las entidades financieras, cajas de crédito, en su territorio. El Gobierno, con el informe favorable del Consejo de Estado, ha interpuesto un recurso sobre la Ley de Cajas de Galicia y, como siempre, ha iniciado un diálogo con el Gobierno de Galicia para buscar un punto de encuentro ante las discrepancias en la interpretación sobre algunos contenidos de la Ley de Cajas. El Gobierno, como le dije antes, hace un llamamiento a que no hagamos del sistema financiero y de las cajas un elemento para la confrontación política y partidaria. El llamamiento es a todos los grupos y por supuesto al mío en primer lugar, porque estamos hablando de otra cosa y el sistema financiero exige medidas y respuestas de carácter técnico, de solvencia y de seguridad, porque hay decisiones muy importantes en juego. Muchas gracias. (Aplausos.)\nJOSÉ LUIS RODRÍGUEZ ZAPATERO:  Señor Jorquera, es fácil entender que el Gobierno, y personalmente yo, ve con toda la simpatía del mundo que Galicia tenga unas buenas entidades financieras solventes y sólidas, que sean gallegas y que canalicen el ahorro gallego. ¡Solo faltaría! Lo veo como una propuesta y como una política razonables, pero con un matiz, y es que al Gobierno le corresponde, y sobre todo al Banco de España, garantizar la solvencia de cualquier proceso de reestructuración o de fusión, porque, si no, ¿sabe cuáles son las consecuencias si no hay solvencia de futuro? Que todos los ciudadanos tendremos que afrontar una situación de insolvencia. Ese es el límite, eso es razonable y eso no es ni político ni antipolítico, es de sentido común. Gracias. (Aplausos.)\nJOSÉ LUIS RODRÍGUEZ ZAPATERO:  Gracias, señor presidente. Señor Llamazares, antes ya me he referido a esta cuestión. El Gobierno cumple con un mandato, con una petición de la Cámara. Hace una propuesta, que incluye la prolongación de la edad de jubilación, sobre el futuro del sistema de pensiones para tener un debate de país sereno, porque lo podemos tener sereno, no tenemos urgencia en cuanto a la solvencia y la solidez del sistema de Seguridad Social. Ese debate es necesario. No hacerlo es irresponsable. No decir a la ciudadanía que dentro de veinticinco años podemos tener problemas en la Seguridad Social por el proceso de envejecimiento de la población y que queremos mantener buenas pensiones, cada día mejores pensiones para todos los que lleguen a la edad de jubilación sería irresponsable. Vamos a hacerlo. Nuestra propuesta, como no puede ser de otra manera, es para el consenso -lo he dicho- en el Pacto de Toledo con los partidos y con los agentes sociales. Estamos abiertos a otras propuestas, a debatirlas, a ponerlas encima de la mesa y a buscar la mejor desde nuestros principios, desde nuestro análisis y desde nuestra posición. Por eso le decía que vaya a la mesa, explique y razone propuestas alternativas. Nosotros vamos a escuchar, y como considero que el interés nacional y la Seguridad Social y el sistema de pensiones están por encima de cualquier otra circunstancia, mi deseo y mi compromiso fundamental es un gran acuerdo nacional sobre el futuro del sistema de pensiones. Esa es la posición del Gobierno. Gracias. (Aplausos.)\nJOSÉ LUIS RODRÍGUEZ ZAPATERO:  Lo que caracteriza a una democracia deliberativa es el derecho de propuesta y si además va acompañada por el compromiso de buscar el acuerdo de todos es aún mucho más deliberativa, más constructiva y más positiva. Lo que no puede ser y lo que va en contra de una democracia deliberativa es que no se diga la verdad de las cosas y de los problemas que tenemos. Eso no va con la democracia deliberativa. La edad de jubilación en España está en 63 años y unos meses, la real, y como somos el país de Europa con más expectativas de vida, afortunadamente, eso nos plantea un problema propio. Además, somos un país que merece mejorar las pensiones y lo haremos si todos hacemos un esfuerzo, porque hay pensiones muy bajas y sobre todo va a haber problemas con aquellos que han perdido su empleo en este proceso para la jubilación, que tendrán que jubilarse con una pensión digna. En ese compromiso estamos, en eso queremos trabajar. (Aplausos.)\nJOSÉ LUIS RODRÍGUEZ ZAPATERO:  Señor Rajoy, le agradezco su compromiso. En esto tiene la coherencia que ha mantenido a lo largo del tiempo de apoyar el envío de tropas a Afganistán que hoy va a explicar la ministra de Defensa en Comisión. Usted ha sido coherente. Creo que el Gobierno ha comparecido en muchas ocasiones, pero es un tema de importancia para nuestro país, es la misión más difícil que tenemos y en aras de un buen clima voy a atender su petición y compareceré ante esta Cámara en un Pleno. Por supuesto, eso sí, espero que por parte del conjunto de los grupos sea fijado en una fecha razonable a tenor del calendario y de la agenda que, como consecuencia de la Presidencia europea, tenemos en este periodo, pero estoy seguro de que los grupos llegarán a un acuerdo y con ello -estas cosas pasan pocas veces- le doy satisfacción, señor Rajoy. Sí, voy a atender su petición, voy a comparecer en la Cámara sobre Afganistán. Gracias. (Aplausos.)",
"\nGASPAR LLAMAZARES TRIGO: MANTIENE EL GOBIERNO SU PROPUESTA DE RETRASAR LA EDAD DE JUBILACIÓN A LOS 67 AÑOS",
"\nMARÍA TERESA FERNÁNDEZ DE LA VEGA SANZ:  Señoría, el Gobierno ejerce siempre sus responsabilidades y somete su gestión al control del Parlamento. El debate de esta mañana es un buen ejemplo. Ya sé que ustedes no quieren darse por enterados porque solo les gusta echar leña al fuego. Le diré: En catorce ocasiones el Gobierno ha contestado a su pregunta. Hoy volverá a contestar. Por tanto, ahí tiene la respuesta. (Aplausos.)\nMARÍA TERESA FERNÁNDEZ DE LA VEGA SANZ:  Señoría, lecciones de democracia, las justas. (Protestas.) No, no.\nMARÍA TERESA FERNÁNDEZ DE LA VEGA SANZ:  Este Gobierno ha hecho del Parlamento. (Un señor diputado: ¿Si o no?) Ya he dicho no. Por tanto, ya he contestado a su pregunta concreta. Este Gobierno ha hecho del Parlamento el centro del debate político y las relaciones que tenemos entre los dos poderes son unas relaciones que se guían por tres principios: independencia, colaboración y control. Tres premisas que el Gobierno no solo cumple, que no todos pueden decir lo mismo, porque por sus obras les conoceréis. (Una señora diputada: ¡Ojalá!) Y si quiere le doy algún ejemplo de ustedes. Fíjense, en apenas una legislatura y media el presidente del Gobierno ha comparecido aquí en esta Cámara en 57 ocasiones. Ustedes necesitaron ocho años para hacerlo cincuenta. Eso sí que es cultivar una relación. Por no hablarle, si quiere, del control del Senado, en donde a su presidente no se le vio ni en una sola vez en ocho años. En 2.920 días no dijeron ni pío, señoría. (Rumores.)\nMARÍA TERESA FERNÁNDEZ DE LA VEGA SANZ:  Hoy hay más control, más transparencia y más debate que cuando ustedes gobernaban. (Rumores.) Si, lo hay. Hoy hay más control, hoy hay más pluralidad, porque aunque es verdad que ustedes están más con los valores absolutos, la ciudadanía está más con la pluralidad. Por supuesto que el Gobierno respeta al Parlamento, pero respetar no es imponer, que es lo que ustedes hacían cuando gobernaban y lo que pretenden hacer también cuando no gobiernan. Le recordaré que, por ejemplo, para determinar qué número de ministerios hay que crear hay que ganar antes las elecciones. Así que menos aspavientos demagógicos y menos remilgos carnavaleros y más trabajar, señoría, que es lo que tienen que hacer ustedes. (Aplausos.)",
"\nMANUEL MARÍA CHAVES GONZÁLEZ:  Muchas gracias, señora presidenta. Señor Mariscal, el Gobierno de España va a invertir en Canarias 25.000 millones de euros durante los próximos diez años. De estos 25.000 mil millones, 2.229 se invertirán con cargo a los Presupuestos Generales del Estado de la siguiente forma, para que usted tome nota, señor Mariscal: 574 millones en inversión directa -capítulo 6-; 811 millones en transferencia de capital a empresas y administraciones -capítulo 7-; 752 millones en convenios y subvenciones -capítulo 4- y 92 millones en operaciones financieras -capítulo 8-. Como ve, señor Mariscal, esto es algo más que un compromiso presupuestario; es una realidad presupuestaria recogida en los Presupuestos Generales del Estado para el año 2010. (Aplausos.)\nMANUEL MARÍA CHAVES GONZÁLEZ:  Señor Mariscal, le ruego que se repase usted los Presupuestos Generales del Estado para el año 2010. Léaselo y verá todos los compromisos del Gobierno en relación con Canarias. Hay un compromiso muy claro de invertir más que nunca en Canarias pero ustedes, como siempre, a la contra. Yo le pregunto a usted: ¿Por qué se opone y quiere descalificar que el Gobierno de España quiera invertir 25.000 millones de euros en Canarias? ¿Por qué se opone? ¿Por qué se opone, señor Mariscal? ¿Por qué se opone a que el Gobierno de España adquiera el compromiso de establecer un horizonte de seguridad económica para el Archipiélago? Se lo puedo decir con toda claridad, señor Mariscal: ustedes no soportan que el Gobierno socialista invierta en Canarias el doble de lo que invirtió el Gobierno del Partido Popular durante su etapa. (Aplausos.) Eso es lo que les ocurre a ustedes. No soportan que el Gobierno de España vaya a mantener el esfuerzo inversor durante diez años, quieren evitar que se ponga de manifiesto que este Gobierno hace por Canarias lo que ustedes no fueron capaces de hacer durante su etapa de Gobierno, señor Mariscal. Eso es lo que les pasa. (Aplausos.)",
"\nTRINIDAD JIMÉNEZ GARCÍA-HERRERA:  Muchas gracias, señora presidenta. Señoría, como sabe, la ley tiene por finalidad la creación de un sistema de protección para las personas en situación de dependencia, garantizando el carácter universal y público de las prestaciones, así como el acceso en condiciones de igualdad. La ley lleva apenas tres años en vigor, tres años en los que gracias al compromiso y a la actuación conjunta del Gobierno y de las comunidades autónomas más de medio millón de personas están ya percibiendo una prestación reconocida por la ley; tres años -y ya contesto a su pregunta- en los que Gobierno ha hecho un gran esfuerzo presupuestario destinando 3.229 millones de euros a la dependencia, un 63,7 por ciento más de lo previsto inicialmente en la memoria económica de la ley. (Aplausos.)\nTRINIDAD JIMÉNEZ GARCÍA-HERRERA:  Gracias, señora presidenta. Señoría, efectivamente su grupo no aprobó esta ley, pero esta ley se está desarrollando, se está consolidando, se está cumpliendo y hoy tenemos -lo vuelvo a repetir- más de medio millón de personas recibiendo una ayuda, una prestación, un derecho consolidado como ayuda a la dependencia. Lo hicimos en el año 2008, lo hicimos en el año 2009 y lo volveremos a hacer en el año 2010. Quiero recordarle que no solamente incrementamos en un 35 por ciento el presupuesto del año 2010 respecto al año 2009, sino que hay que tener en cuenta que el acuerdo de financiación realiza una importante transferencia de recursos en impuestos especiales, IVA, para que las comunidades autónomas -todas sin excepción- tengan la posibilidad, con sus propios recursos y con los que aporta el Estado, de financiar, consolidar y desarrollar un derecho por el que hemos hecho una apuesta fundamental desde el Gobierno de la nación, y lo conseguiremos. En 2015 estaba previsto en la ley que estuviera completado el desarrollo y lo vamos a conseguir. Gracias. (Aplausos.)",
"\nCARME CHACÓN PIQUERAS:  Escrupulosamente, señoría. (Aplausos.)\nCARME CHACÓN PIQUERAS:  Señoría, ¿sabe usted lo que está pasando? El Gobierno de José Luis Rodríguez Zapatero le está dando una vuelta a una decisión errónea que tomó el Gobierno de José María Aznar, como fue prolongar la vida útil de los BMR, vehículos que ya tenían en aquel entonces treinta años de antigüedad. Fue decisión de su Gobierno. (Aplausos.) ¿Sabe qué ha hecho el Gobierno de Zapatero? Dos cosas. Poner en marcha un plan de renovación de vehículos, el más ambicioso que jamás hayan conocido nuestras Fuerzas Armadas, para tener 575 nuevos blindados más, con una inversión de 321 millones de euros y entre tanto hemos modernizado los BMR para que puedan seguir siendo aptos para la misión. Hemos renovado sus motores, reforzado su blindaje y equipado todos y cada uno de ellos con inhibidores de frecuencia. Gracias a ese esfuerzo hoy existen en Afganistán hasta 94 blindados medio tipo Lince y ya tenemos 34 blindados de pelotón RG-31, que van a llegar hasta 62 unidades en el mes de marzo. Vehículos con la mayor protección antiminas de los que ahora mismo existen en el mercado. De manera que cuando en el mes de marzo llegue a Afganistán el próximo relevo, que es el que se está entrenando ahora para poder utilizar los BMR, no va a haber ni un solo BMR más actuando en Afganistán y estarán los nuevos vehículos en los que ha invertido el Gobierno de José Luis Rodríguez Zapatero. ¿Sabe de cuánto ha sido la inversión? Se lo repito: 321 millones de euros. ¿Sabe cuánto invirtió el Gobierno en ocho años de José María Aznar en nuevos blindados? Cero euros, señoría. (Aplausos.) No solo hemos mejorado los vehículos y hemos puesto en marcha un plan de renovación, es que ahora nuestros soldados acuden a la zona de operaciones en aviones seguros. (Aplausos.) Es que ahora tenemos aviones no tripulados para mejorar nuestra inteligencia, es que además todos los ellos llevan inhibidores de frecuencia y nuestras bases cuentan con mejores sistemas de protección. Por tanto, la prioridad del Gobierno de José Luis Rodríguez Zapatero, con hechos, es la seguridad de nuestras tropas. Ahora miremos los dos atrás y al menos coincida conmigo en que ojalá hubiera sido la prioridad del Gobierno de José María Aznar. (Una señora diputada: ¡Muy bien!- Aplausos.)",
"\nALFREDO PÉREZ RUBALCABA:  Muchas gracias, señora presidenta. No, señor Cosidó.\nALFREDO PÉREZ RUBALCABA:  Muchas gracias, señora presidenta. Señor Cosidó, creo que he contestado catorce veces a preguntas parlamentarias de usted y de su compañero Gil Lázaro sobre este tema. Es más creo que en los últimos meses, desde septiembre, solo he contestado preguntas parlamentarias de este tema, de usted y del señor Gil Lázaro. Por tanto Houdini parlamentario, cero; es más, el martes estuve en el Senado, cero. Le podría decir que me inspira tanto terror su insidiosa intervención, que es la de siempre, que me busqué un cambio del orden del día del Parlamento de Estrasburgo para no estar aquí, pero... no es verdad, no es así. Le diré una vez más y lo diré en la Cámara que hay un proceso de investigación judicial que yo respeto y el Gobierno respeta y en el que ustedes están personados con toda seguridad para ayudar a que se acaben las cosas, sin ninguna intencionalidad, estoy completamente seguro. Le diré también que los implicados en esa operación están todos procesados -fueron detenidos y procesados-, y eso tiene que quedar muy claro porque eso sí que afecta a la lucha antiterrorista. Finalmente le diré algo más: que el director general de la Policía y el secretario de Estado de Seguridad hablen es lo normal, todos los días, por la mañana, por la tarde y por la noche. ¿Qué tiene eso de raro? No tiene nada de raro, salvo que alguien tenga en la cabeza insidias políticas, que es lo que usted hace una y otra vez en esta Cámara desde hace algunos meses, contra los policías, contra los jueces, contra los fiscales y ahora contra los responsables del Ministerio del Interior; insidias políticas, señor Cosidó, esa es su especialidad en esta Cámara. (Aplausos.)\nALFREDO PÉREZ RUBALCABA:  He contestado siempre a sus preguntas, señor Gil Lázaro.\nALFREDO PÉREZ RUBALCABA:  Menos mal que usted no iba a proferir ninguna insidia en su pregunta parlamentaria. No hace usted otra cosa, señor Gil Lázaro, cada vez con un tono más agresivo, más bronco. La verdad es que poco más se me ocurre decirle. Muchas gracias, señora presidenta. (Aplausos.)"]}, {name: "republican", speeches: ["\nMARIANO RAJOY BREY: PUEDE EXPLICAR EL PRESIDENTE DEL GOBIERNO POR QUÉ NO COMPARECE EN ESTA CÁMARA PARA EXPLICAR EL FUTURO DE LAS TROPAS DESPLEGADAS EN AFGANISTÁN\nMARIANO RAJOY BREY:  Señor presidente, le voy a hacer una propuesta\nMARIANO RAJOY BREY:  Señor presidente, le voy a hacer una propuesta deliberativa también, y es que venga aquí a deliberar sobre un asunto importante. Como usted sabe, durante la práctica totalidad del pasado año y sobre todo en los últimos meses ha habido un debate a nivel internacional muy intenso sobre la redefinición de la estrategia en Afganistán. Además, como usted también sabe, tenemos ahora muchos más soldados que cuando usted, en el año 2008, dijo que no enviaría más soldados a Afganistán. Después fueron 220, después el Batallón Electoral -es verdad que ya ha vuelto- y ahora pretenden que vayan 500 soldados más a Afganistán. Por otra parte, la operatividad de nuestro ejército hoy es mayor y es obvio que estamos ante un escenario bélico. Es lógico, por tanto, que una vez que las cosas hayan cambiado, y puesto que usted desde el año 2004 no ha debatido sobre este asunto en las Cortes, venga. Por tanto, el sentido que tiene esta intervención es decirle que debe venir aquí, porque es un tema importante para el mundo pero también para España y los españoles, a explicar la naturaleza de la misión, el coste, la seguridad y sobre todo las perspectivas de futuro. Le pido que venga aquí y ya le anuncio por si hubiera alguna duda -que seguro que no la tiene- que yo voy a apoyar y mi grupo también el envío de 500 soldados más a Afganistán, pero creo que los españoles deben saber exactamente, como ha sabido el resto de ciudadanos de otros países que están en Afganistán, por boca de sus jefes de Estado o de Gobierno, los temas a los que yo he hecho referencia. Gracias. (Aplausos.)",
"\nMARÍA SORAYA SÁENZ DE SANTAMARÍA ANTÓN: CÓMO ENTIENDE LA VICEPRESIDENTA PRIMERA LAS RELACIONES ENTRE EL PODER EJECUTIVO Y EL PODER LEGISLATIVO\nMARÍA SORAYA SÁENZ DE SANTAMARÍA ANTÓN:  Muchas gracias, presidente. Voy a aprovechar, dado que estamos en racha con el presidente del Gobierno, para ver si hoy obtengo una respuesta sobre una cosa que le llevo pidiendo desde hace tiempo a la señora De la Vega. Un ejemplo muy claro de cómo entiende la señora De la Vega sus relaciones con esta Cámara, sus relaciones con el Poder Legislativo, es un caso conocido como el caso Faisán. El pasado 28 de octubre usted, la vicepresidenta primera del Gobierno, no respondió a una pregunta que yo le hice en esta Cámara, en esta misma casa, alegando incompetencia. El ministro Rubalcaba, desde entonces, ha venido combinando el escapismo parlamentario con la falsedad. Y el pasado miércoles, precisamente a preguntas de mi grupo parlamentario, el ministro de Justicia despachaba el tema diciendo que son solo rumores. No sé si necesitará que le recuerde lo que dijo la Audiencia Nacional el pasado lunes. La Audiencia Nacional dijo que lo que ustedes llaman rumores es un caso de gravedad, y cito textualmente, sin precedentes en la historia de la lucha contra el terrorismo en España. Por eso, señoría, creo que hoy usted debe dar una respuesta en esta Cámara. Y debe darla porque la policía no puede seguir siendo comprometida por ustedes con su silencio. Y debe darla porque no se puede poner en entredicho el prestigio del Estado de derecho, que es el principal instrumento de algo que creo que compartimos todos, que debe ser una lucha unánime y sin cuartel contra el terrorismo. Yo le pregunto porque estoy en el ejercicio de mi obligación democrática como representante del Poder Legislativo de someter a control las acciones del Ejecutivo y especialmente velar por que el Ejecutivo cumpla siempre, siempre la legalidad en el ejercicio de sus funciones. Yo estoy cumpliendo con mi obligación haciéndole esta pregunta. Espero que usted hoy cumpla con las suya. Muchas gracias. (Aplausos.)\nMARÍA SORAYA SÁENZ DE SANTAMARÍA ANTÓN:  Señora De la Vega, vuelve a eludir usted una respuesta directa en un caso tan claro y en que tiene usted la respuesta tan fácil. El silencio no va a librar de sospechas la actuación de algunos. Y escúcheme bien cuando le digo que solo quien tiene algo que esconder en el Gobierno trata de ocultar la verdad en el Parlamento. (Aplausos.) Solo en ese caso. Hay muchísimas preguntas sin respuesta, pero hoy lo tiene bien fácil si quiere estar a la altura de las circunstancias. La respuesta es muy sencilla. Yo le pregunto: ¿Ha habido alguna instrucción política detrás del chivatazo a ETA? Basta con que me diga usted, aquí y hoy, si sí o no. (Aplausos.)",
"\nGUILLERMO MARISCAL ANAYA: PUEDE ACLARAR EL VICEPRESIDENTE TERCERO Y MINISTRO DE POLÍTICA TERRITORIAL LOS COMPROMISOS PRESUPUESTARIOS CONCRETOS QUE SUPONE LA ESTRATEGIA INTEGRAL PARA LA COMUNIDAD AUTÓNOMA DE CANARIAS\nGUILLERMO MARISCAL ANAYA:  Le recuerdo, señor vicepresidente, que usted y su\nGUILLERMO MARISCAL ANAYA:  Le recuerdo, señor vicepresidente, que usted y su Gobierno adquirieron un compromiso con Canarias el 9 de octubre para invertir 25.000 millones de euros en los próximos diez años, 10.000 de los cuales serían en los primeros cuatro. (La señora vicepresidenta, Cunillera i Mestres, ocupa la Presidencia.) Le recuerdo, además, que el Gobierno no puede firmar cheques sin fondos, señor vicepresidente, porque si no lo que están haciendo ustedes es un tomadura de pelo o, como bien decía recientemente Paulino Rivero, ZP con el Plan Canarias buscaba un titular. Por eso es por lo que le pregunto: ¿Puede aclarar cuáles son las inversiones concretas de la estrategia integral para Canarias? Porque como usted sabrá, señor vicepresidente, lo que no está en el presupuesto no existe, no es de este mundo. Gracias. (Aplausos.)\nGUILLERMO MARISCAL ANAYA:  Señor vicepresidente, Canarias vive actualmente\nGUILLERMO MARISCAL ANAYA:  Señor vicepresidente, Canarias vive actualmente un drama social: 26,9 por ciento de paro, 118.000 personas que no perciben ni subsidio ni desempleo; hay más personas cobrando subsidio que paro en Canarias ahora mismo. Evidentemente necesitamos una estrategia concreta para Canarias por parte de la Administración General del Estado para reactivar la actividad económica y frenar el elevado número de desempleados, pero el Plan Canarias no contempla ninguna novedad, no hay nada nuevo, ninguna nueva medida, apenas 100 millones de euros más para el año que viene. Han convertido ustedes el Plan Canarias en un sumatorio de medidas que ya estaban contempladas y previstas con anterioridad a la celebración del Consejo de Ministros, señor vicepresidente. Si es que es una desfachatez, si es que ustedes han incluido el Fondo de Compensación Interterritorial también en este proyecto e incluso el Fondo de Empleo Local también lo han incluido. Un sumatorio, en definitiva. Señor vicepresidente, lo que usted está haciendo aquí es el modelo clásico de la política que tiene Zapatero. Es decir, anuncio, rueda de prensa, grandes expectaciones y frustración. Continuamente la misma estrategia. No tienen ninguna credibilidad, y ya no lo digo yo sino que lo dice el presidente del Gobierno de Canarias que apoyó estos Presupuestos Generales del Estado junto con ustedes. Recientemente en una entrevista decía que ve al Gobierno excesivamente tibio y con falta de convicción en aquellas reformas estructurales que son imprescindibles, señor vicepresidente. Tengo el convencimiento moral de que usted sabía que no se iba a cumplir el Plan Canarias, como tampoco han cumplido la inversión media por habitante que exige el Régimen Económico y Fiscal de Canarias, que es la media de toda España: 238 menos por canario que el resto de la media del territorio nacional. Los diputados canarios le exigimos que adelante y active ya las medidas que prevé ese plan, seleccione cuáles, diga cuándo y cuánto va a invertir. Es su obligación y el compromiso que ustedes adquirieron el 9 de octubre con todos los canarios. Muchas gracias. (Aplausos.)",
"\nJOSEBA AGIRRETXEA URRESTI: CONSIDERA USTED QUE LA CONTRIBUCIÓN DEL GOBIERNO A LA FINANCIACIÓN DE LA LEY DE DEPENDENCIA ESTÁ SIENDO ACORDE A LO ESTABLECIDO\nJOSEBA AGIRRETXEA URRESTI:  Gracias, señora presidenta.\nJOSEBA AGIRRETXEA URRESTI:  Gracias, señora presidenta. Señora ministra, ¿considera usted que la contribución del Gobierno a la financiación de la Ley de Dependencia está siendo acorde a lo establecido? Gracias.\nJOSEBA AGIRRETXEA URRESTI:  Gracias, señora presidenta.\nJOSEBA AGIRRETXEA URRESTI:  Gracias, señora presidenta. Señora ministra, no me coge de sorpresa su respuesta, me imaginaba que iba a ir por ahí, pero como comprenderá no puedo compartir ni el fuero ni el huevo en este caso. Permítame de todas maneras expresarle que soy consciente de que la situación actual de la Ley de Dependencia no es culpa suya, a usted esto le ha venido dado, porque después de haber vagado cual huérfano itinerante por dos ministerios más ha recaído al final en su ministerio, al que han tenido que cambiar hasta el nombre. Creo que es bastante clarificador de que el presidente no tenía muy claro qué hacer con semejante -permítame la expresión- bomba de relojería. Vayamos al meollo. Mi grupo considera que de ninguna manera se está respondiendo a lo previsto. Se hizo una ley -que no apoyó mi grupo por motivos obvios que le explicaré- y se proclamó un derecho, pero no se ató la financiación de ese derecho; fantástico, de aquellos polvos han venido estos lodos. Y en mi comunidad, que no es la peor -lo digo desde el principio-, aunque la financiación proceda del descuento del cupo en estos momentos, con lo que se está destinando según lo financiado vía cupo se atendería solamente, por ejemplo, el 18 por ciento de la dependencia en Vizcaya y el 15 por ciento de la dependencia en Álava o en Guipuzcoa. ¿Cree usted que así se puede sostener una ley? Por ejemplo, como le he dicho, la Diputación Foral de Álava tiene para el año 2010 un presupuesto de 230 millones de euros, el 60 por ciento del mismo se destinará a la atención de personas dependientes, unos 123 millones, y la financiación de 2009, a cuenta de las cargas estatales después del pago del cupo, tanto a través del nivel acordado como del mínimo garantizado, parece que será de 13.900.000 euros, es decir -saque usted el cálculo más o menos-, el 10,7 por ciento, no llega ni al 11 por ciento. En otras comunidades sé que todavía tienen más problemas porque dependen directamente de lo que ustedes les financien. Nosotros dijimos en su momento: Esto debe ser una contingencia de la Seguridad Social para que todo el mundo pueda recibir la financiación que le corresponde. Se hace un derecho, pero después no se facilita la financiación. Muchas gracias.",
"\nARSENIO FERNÁNDEZ DE MESA DÍAZ DEL RÍO: CONSIDERA USTED QUE SE ESTÁN CUMPLIENDO LAS PREVISIONES DE DESPLIEGUE A LA PROTECCIÓN DE LAS TROPAS EN ESCENARIOS DE GUERRA\nARSENIO FERNÁNDEZ DE MESA DÍAZ DEL RÍO:  Gracias, señora presidenta. Señora ministra de Defensa, ¿considera que se están cumpliendo las previsiones de despliegue de la protección de las tropas en escenarios de guerra?\nARSENIO FERNÁNDEZ DE MESA DÍAZ DEL RÍO:  Gracias, señora presidenta. Señora ministra, hablando de protección y hablando de seguridad le voy a dar un dato que seguramente conoce y no hablando por boca de ningún militar, porque no es mi obligación ni mucho menos mi pretensión como tampoco es la suya. Le voy a decir un dato: 30 muertos en los años de misiones internacionales de las Fuerzas Armadas españolas en BMR. Ha habido 30 muertos en carros BMR en las misiones internacionales en las que está participando España, en Bosnia, en Kosovo, en Mostar, en Afganistán y en Líbano. Hablando de seguridad y de protección, señora ministra, le hago una petición: que ni un soldado español más se vuelva a subir a un BMR para realizar las misiones que hasta este momento los han puesto en peligro e incluso han pagado con su vida. Esta es la petición: retírense los BMR de las misiones que están realizando y donde están muriendo soldados españoles hasta que usted ponga los RG-31 a plena disposición de las Fuerzas Armadas o mientras no se utilicen otros carros de otros ejércitos como, por ejemplo, los Piraña, que no hay intención de utilizarlos. La petición es clara: ni un soldado más en un BMR mientras haya riesgo de muerte como se está comprobando a lo largo de estos años. Muchas gracias. (Aplausos.)",
"\nIGNACIO COSIDÓ GUTIÉRREZ: CUÁL ES LA IMPLICACIÓN DEL SECRETARIO DE ESTADO DE SEGURIDAD EN EL CASO DEL CHIVATAZO A ETA\nIGNACIO COSIDÓ GUTIÉRREZ:  Muchas gracias, señora presidenta.\nIGNACIO COSIDÓ GUTIÉRREZ:  Muchas gracias, señora presidenta. Señor ministro, es un verdadero placer poder hacerle esta pregunta porque últimamente tiene usted una agenda más propia del ministro de Asuntos Exteriores que del ministro del Interior. En la investigación policial sobre el caso Faisán hay registradas dos llamadas entre uno de los imputados -por más seña el director general de la Policía en ese momento- y el secretario de Estado de Seguridad. El secretario de Estado de Seguridad se ha declarado amnésico y además no parece que tenga mucha voluntad de venir a esta Cámara a explicar de qué hablaron. Mi pregunta, señor ministro, es si en esas conversaciones se habló del denominado caso Faisán.\nIGNACIO COSIDÓ GUTIÉRREZ:  Muchas gracias, señor ministro por la\nIGNACIO COSIDÓ GUTIÉRREZ:  Muchas gracias, señor ministro por la respuesta. La Audiencia Nacional decidió hace dos días que se va a seguir investigando este caso en una resolución que seguro que le satisface tanto como a mí, por tanto aquí no hemos venido a dirimir posibles responsabilidades penales sino algunas responsabilidades políticas. Es muy normal que un secretario de Estado de Seguridad y un director general de la Policía hablen frecuentemente, pero hay dos anomalías importantes en estas conversaciones que exigen una respuesta por su parte. La primera anomalía es que no es nada normal, no ha ocurrido nunca en ningún país del mundo, que un director general de la Policía sea imputado por un delito de colaboración con banda armada; y en segundo lugar tampoco es normal, señor ministro, que cuando un director general de la Policía y un secretario de Estado de Seguridad hablan lo hagan con el mismo teléfono que utilizaban los terroristas cuando hablaban con el Gobierno, en la negociación con ETA. Por tanto, señor ministro, usted es un Houdini parlamentario pero yo creo que hay muchos españoles hoy esperando que usted dé una respuesta convincente, y si usted no puede o no quiere dar esa respuesta convincente a esta situación absolutamente anómala creo que lo menos que tiene que hacer es cesar al secretario de Estado porque lo que España no puede permitirse es tener a un secretario de Estado de Seguridad bajo sospecha. Señor ministro, la última vez que usted defendió a un miembro del Gobierno de otro caso en su anterior etapa, esa persona terminó en la cárcel. Tiene por tanto un déficit importante de credibilidad en la defensa que sin duda creo que hará del secretario de Estado. Para derrotar al terrorismo, señor ministro, no valen ni el atajo de la guerra sucia ni el atajo de la paz sucia, lo que vale es la firmeza del Estado de derecho, nuestras convicciones democráticas y la defensa de las víctimas -por cierto, le eché de menos en el congreso de Salamanca-. Con la misma firmeza que le estamos apoyando en su política antiterrorista, le exigimos que asuma sus responsabilidades en este caso que jamás debió ocurrir. (Aplausos.)",
"\nIGNACIO GIL LÁZARO: HA PROPORCIONADO SIEMPRE EL MINISTRO DEL INTERIOR INFORMACIÓN VERAZ A ESTA CÁMARA EN RELACIÓN CON EL LLAMADO \"CASO FAISÁN\"\nIGNACIO GIL LÁZARO:  Muchas gracias, señora presidenta.\nIGNACIO GIL LÁZARO:  Muchas gracias, señora presidenta. Señor ministro del Interior, responda tan solo sí o no. ¿Ha proporcionado siempre información veraz a esta Cámara en relación con el llamado caso Faisán?\nIGNACIO GIL LÁZARO:  Gracias.\nIGNACIO GIL LÁZARO:  Gracias. Queda en evidencia que no ha contestado mi pregunta. Era muy sencillo, sí o no. Usted no ha contestado preguntas, ha venido catorce veces aquí a hacer el trámite, a hablar de lo divino y de lo humano, menos del caso Faisán. Señor ministro del Interior, usted ha faltado a la verdad en esta Cámara en detalles concretos, como lo hizo en las sesiones del 14 de octubre y del 16 de diciembre, y me remito al \"Diario de Sesiones\". Usted ha tratado de confundir a esta Cámara, y lo ha hecho esta misma mañana tratando de establecer un solapamiento, una identidad entre las detenciones de la red de extorsión etarra y el caso Faisán cuando son dos cosas absolutamente distintas, como ha puesto muy claramente de manifiesto hace apenas unas horas el auto de la Sala Penal de la Audiencia Nacional; repito, cosas distintas. En el caso Faisán estamos hablando de delitos de colaboración con banda armada, de delitos de revelación de secretos perpetrados por policías según el auto y de una gravedad inusitada en la historia de la lucha contra el terrorismo. Sobre eso usted no solamente no ha hablado en esta Cámara, sino que ha tratado de evitarlo bajo cualquier forma en que se pudiera esclarecer la verdad. Lo ha hecho utilizando a la fiscalía de una manera insólita pidiendo el sobreseimiento. Hoy ha vuelto a faltar a la verdad cuando ha vuelto a reproducir su mención de insidias. ¿Acaso son insidias el auto de la Audiencia Nacional que viene a sintetizar y a sustanciar las mismas afirmaciones que hemos hecho en esta Cámara, que por otro lado son las que nacen de la verdad de los hechos, de la obviedad de los hechos y de la razón jurídica? Señor ministro del Interior, se lo dije hace unas semanas y lo repito hoy. Usted sabe perfectamente quién dio el chivatazo, por qué se dio el chivatazo, cómo se dio el chivatazo y quién ordenó el chivatazo. ¿Quién ordenó el chivatazo, señor ministro del Interior? El tiempo y la justicia lo dirán, pero yo le pregunto: ¿Fue usted? ¿Es usted la equis del caso Faisán, señor ministro del Interior? (Rumores y protestas.) ¿Es el señor Rodríguez Zapatero? Nosotros vamos a seguir insistiendo en este asunto al servicio de la verdad, de la democracia, de la ley, de la Policía y de las víctimas. Muchas gracias. (Aplausos.)"]}].map(party);

data.speakers = {"JOSÉ LUIS RODRÍGUEZ ZAPATERO": {name: "José Luis Rodríguez Zapatero", title: "Socialista (PSOE)"}, "GASPAR LLAMAZARES TRIGO": {name: "GASPAR LLAMAZARES TRIGO", title: "Izquierda Unida"}, "MARIANO RAJOY BREY": {name: "MARIANO RAJOY BREY", title: "Popular (PP)"}, "MARIANO RAJOY BREY": {name: "Mariano Rajoy Brey", title: "Popular (PP)"}, "MARÍA SORAYA SÁENZ DE SANTAMARÍA ANTÓN": {name: "MARÍA SORAYA SÁENZ DE SANTAMARÍA ANTÓN", title: "Popular (PP)"}, "MARÍA SORAYA SÁENZ DE SANTAMARÍA ANTÓN": {name: "María Soraya Sáenz de Santamaría Antón", title: "Popular (PP)"}, "MARÍA TERESA FERNÁNDEZ DE LA VEGA SANZ": {name: "María Teresa Fernández de la Vega Sanz", title: "Socialista (PSOE)"}, "GUILLERMO MARISCAL ANAYA": {name: "GUILLERMO MARISCAL ANAYA", title: "Popular (PP)"}, "GUILLERMO MARISCAL ANAYA": {name: "Guillermo Mariscal Anaya", title: "Popular (PP)"}, "MANUEL MARÍA CHAVES GONZÁLEZ": {name: "Manuel María Chaves González", title: "Socialista (PSOE)"}, "JOSEBA AGIRRETXEA URRESTI": {name: "JOSEBA AGIRRETXEA URRESTI", title: "PNV"}, "JOSEBA AGIRRETXEA URRESTI": {name: "Joseba Agirretxea Urresti", title: "PNV"}, "TRINIDAD JIMÉNEZ GARCÍA-HERRERA": {name: "Trinidad Jiménez García-Herrera", title: "Socialista (PSOE)"}, "ARSENIO FERNÁNDEZ DE MESA DÍAZ DEL RÍO": {name: "ARSENIO FERNÁNDEZ DE MESA DÍAZ DEL RÍO", title: "Popular (PP)"}, "ARSENIO FERNÁNDEZ DE MESA DÍAZ DEL RÍO": {name: "Arsenio Fernández de Mesa Díaz del Río", title: "Popular (PP)"}, "CARME CHACÓN PIQUERAS": {name: "Carme Chacón Piqueras", title: "Socialista (PSOE)"}, "IGNACIO COSIDÓ GUTIÉRREZ": {name: "IGNACIO COSIDÓ GUTIÉRREZ", title: "Popular (PP)"}, "IGNACIO COSIDÓ GUTIÉRREZ": {name: "Ignacio Cosidó Gutiérrez", title: "Popular (PP)"}, "ALFREDO PÉREZ RUBALCABA": {name: "Alfredo Pérez Rubalcaba", title: "Socialista (PSOE)"}, "IGNACIO GIL LÁZARO": {name: "IGNACIO GIL LÁZARO", title: "Popular (PP)"}, "IGNACIO GIL LÁZARO": {name: "Ignacio Gil Lázaro", title: "Popular (PP)"}};

data.topics = [{name: "seguridad", re: /\b(seguridad)\b/gi, x: 36.0, y: 36.0}, {name: "tropas", re: /\b(tropas)\b/gi, x: 50.0, y: 10.0}, {name: "país", re: /\b(país)\b/gi, x: 64.0, y: 10.0}, {name: "españoles", re: /\b(españoles)\b/gi, x: 76.0, y: 8.0}, {name: "defensa", re: /\b(defensa)\b/gi, x: 88.0, y: 8.0}, {name: "seguridad social", re: /\b(seguridad social)\b/gi, x: 100.0, y: 8.0}, {name: "eta", re: /\b(eta)\b/gi, x: 110.0, y: 6.0}, {name: "fuerzas", re: /\b(fuerzas)\b/gi, x: 120.0, y: 6.0}, {name: "fuerzas armadas", re: /\b(fuerzas armadas)\b/gi, x: 130.0, y: 6.0}, {name: "misión", re: /\b(misión)\b/gi, x: 140.0, y: 6.0}, {name: "operaciones", re: /\b(operaciones)\b/gi, x: 148.0, y: 4.0}, {name: "paro", re: /\b(paro)\b/gi, x: 156.0, y: 4.0}, {name: "político", re: /\b(político)\b/gi, x: 164.0, y: 4.0}, {name: "recursos", re: /\b(recursos)\b/gi, x: 172.0, y: 4.0}, {name: "investigación", re: /\b(investigación)\b/gi, x: 180.0, y: 4.0}].map(topic);

data.topic = function(name) {
  var t = topic({name: name, re: new RegExp("\\b(" + d3.requote(name) + ")\\b", "gi")}, data.topics.length);
  data.topics.push(t);
  return t;
};

function party(party) {
  party.speeches = party.speeches.map(speech);
  party.sections = sections(party.speeches);
  party.wordCount = d3.sum(party.sections, function(d) { return countWords(d.speech.text.substring(d.i, d.j)); });
  return party;
}

function speech(text, i) {
  return {text: text, id: i};
}

function sections(speeches) {
  // PFS: Afegeixo alguns caracters accentuats que no pertanyen a l'alfabet anglès
  // var speakerRe = /(?:\n|^)([A-Z\.()\- ]+): /g,
  var speakerRe = /(?:\n|^)([A-ZÁÉÍÓÚÑÀÈÇ\.()\- ]+): /g,
      sections = [];

  speeches.forEach(function(speech) {
    var speakerName = "AUDIENCE",
        match,
        i = speakerRe.lastIndex = 0;
    while (match = speakerRe.exec(speech.text)) {
      if (match.index > i) sections.push({speaker: speakerName, speech: speech, i: i, j: match.index});
      speakerName = match[1];
      i = speakerRe.lastIndex;
    }
    sections.push({speaker: speakerName, speech: speech, i: i, j: speech.text.length});
  });

  return sections.filter(function(d) { return !/^AUDIENCE\b/.test(d.speaker); });
}

function topic(topic, i) {
  topic.id = i;
  topic.count = 0;
  topic.cx = topic.x;
  topic.cy = topic.y;

  topic.parties = data.parties.map(function(party) {
    var count = 0,
        mentions = [];

    party.sections.forEach(function(section) {
      var text = section.speech.text.substring(section.i, section.j), match;
      topic.re.lastIndex = 0;
      while (match = topic.re.exec(text)) {
        ++count;
        mentions.push({
          topic: topic,
          section: section,
          i: section.i + match.index,
          j: section.i + topic.re.lastIndex
        });
      }
    });

    topic.count += count = count / party.wordCount * 25e3;
    return {count: count, mentions: mentions};
  });

  return topic;
}

function countWords(text) {
  return text.split(/\s+/g)
      .filter(function(d) { return d !== "—"; })
      .length;
}

})();

(function() {

var width = 970,
    height = 540;

var collisionPadding = 4,
    clipPadding = 4,
    minRadius = 16, // minimum collision radius
    maxRadius = 65, // also determines collision search radius
    maxMentions = 100, // don't show full transcripts
    activeTopic; // currently-displayed topic

var formatShortCount = d3.format(",.0f"),
    formatLongCount = d3.format(".1f"),
    formatCount = function(d) { return (d < 10 ? formatLongCount : formatShortCount)(d); };

var r = d3.scale.sqrt()
    .domain([0, d3.max(data.topics, function(d) { return d.count; })])
    .range([0, maxRadius]);

var force = d3.layout.force()
    .charge(0)
    .size([width, height - 80])
    .on("tick", tick);

var node = d3.select(".g-nodes").selectAll(".g-node"),
    label = d3.select(".g-labels").selectAll(".g-label"),
    arrow = d3.select(".g-nodes").selectAll(".g-note-arrow");

d3.select(".g-nodes").append("rect")
    .attr("class", "g-overlay")
    .attr("width", width)
    .attr("height", height)
    .on("click", clear);

d3.select(window)
    .on("hashchange", hashchange);

d3.select("#g-form")
    .on("submit", submit);

updateTopics(data.topics);
hashchange();

// Update the known topics.
function updateTopics(topics) {
  topics.forEach(function(d) {
    d.r = r(d.count);
    d.cr = Math.max(minRadius, d.r);
    d.k = fraction(d.parties[0].count, d.parties[1].count);
    if (isNaN(d.k)) d.k = .5;
    if (isNaN(d.x)) d.x = (1 - d.k) * width + Math.random();
    d.bias = .5 - Math.max(.1, Math.min(.9, d.k));
  });
  force.nodes(data.topics = topics).start();
  updateNodes();
  updateLabels();
  updateArrows();
  tick({alpha: 0}); // synchronous update
}

// Update the displayed nodes.
function updateNodes() {
  node = node.data(data.topics, function(d) { return d.name; });

  node.exit().remove();

  var nodeEnter = node.enter().append("a")
      .attr("class", "g-node")
      .attr("xlink:href", function(d) { return "#" + encodeURIComponent(d.name); })
      .call(force.drag)
      .call(linkTopic);

  var democratEnter = nodeEnter.append("g")
      .attr("class", "g-democrat");

  democratEnter.append("clipPath")
      .attr("id", function(d) { return "g-clip-democrat-" + d.id; })
    .append("rect");

  democratEnter.append("circle");

  var republicanEnter = nodeEnter.append("g")
      .attr("class", "g-republican");

  republicanEnter.append("clipPath")
      .attr("id", function(d) { return "g-clip-republican-" + d.id; })
    .append("rect");

  republicanEnter.append("circle");

  nodeEnter.append("line")
      .attr("class", "g-split");

  node.selectAll("rect")
      .attr("y", function(d) { return -d.r - clipPadding; })
      .attr("height", function(d) { return 2 * d.r + 2 * clipPadding; });

  node.select(".g-democrat rect")
      .style("display", function(d) { return d.k > 0 ? null : "none" })
      .attr("x", function(d) { return -d.r - clipPadding; })
      .attr("width", function(d) { return 2 * d.r * d.k + clipPadding; });

  node.select(".g-republican rect")
      .style("display", function(d) { return d.k < 1 ? null : "none" })
      .attr("x", function(d) { return -d.r + 2 * d.r * d.k; })
      .attr("width", function(d) { return 2 * d.r; });

  node.select(".g-democrat circle")
      .attr("clip-path", function(d) { return d.k < 1 ? "url(#g-clip-democrat-" + d.id + ")" : null; });

  node.select(".g-republican circle")
      .attr("clip-path", function(d) { return d.k > 0 ? "url(#g-clip-republican-" + d.id + ")" : null; });

  node.select(".g-split")
      .attr("x1", function(d) { return -d.r + 2 * d.r * d.k; })
      .attr("y1", function(d) { return -Math.sqrt(d.r * d.r - Math.pow(-d.r + 2 * d.r * d.k, 2)); })
      .attr("x2", function(d) { return -d.r + 2 * d.r * d.k; })
      .attr("y2", function(d) { return Math.sqrt(d.r * d.r - Math.pow(-d.r + 2 * d.r * d.k, 2)); });

  node.selectAll("circle")
      .attr("r", function(d) { return r(d.count); });
}

// Update the displayed node labels.
function updateLabels() {
  label = label.data(data.topics, function(d) { return d.name; });

  label.exit().remove();

  var labelEnter = label.enter().append("a")
      .attr("class", "g-label")
      .attr("href", function(d) { return "#" + encodeURIComponent(d.name); })
      .call(force.drag)
      .call(linkTopic);

  labelEnter.append("div")
      .attr("class", "g-name")
      .text(function(d) { return d.name; });

  labelEnter.append("div")
      .attr("class", "g-value");

  label
      .style("font-size", function(d) { return Math.max(8, d.r / 2) + "px"; })
      .style("width", function(d) { return d.r * 2.5 + "px"; });

  // Create a temporary span to compute the true text width.
  label.append("span")
      .text(function(d) { return d.name; })
      .each(function(d) { d.dx = Math.max(d.r * 2.5, this.getBoundingClientRect().width); })
      .remove();

  label
      .style("width", function(d) { return d.dx + "px"; })
    .select(".g-value")
      .text(function(d) { return formatShortCount(d.parties[0].count) + " - " + formatShortCount(d.parties[1].count); });

  // Compute the height of labels when wrapped.
  label.each(function(d) { d.dy = this.getBoundingClientRect().height; });
}

// Update the active topic.
function updateActiveTopic(topic) {
  d3.selectAll(".g-head").attr("class", topic ? "g-head g-has-topic" : "g-head g-hasnt-topic");
  if (activeTopic = topic) {
    node.classed("g-selected", function(d) { return d === topic; });
    updateMentions(findMentions(topic));
    d3.selectAll(".g-head a").text(topic.name);
    d3.select(".g-democrat .g-head span.g-count").text(formatCount(topic.parties[0].count));
    d3.select(".g-republican .g-head span.g-count").text(formatCount(topic.parties[1].count));
  } else {
    node.classed("g-selected", false);
    updateMentions(sampleMentions());
    d3.selectAll(".g-head a").text("various topics");
    d3.selectAll(".g-head span.g-count").text("some number of");
  }
}

// Update displayed excerpts.
function updateMentions(mentions) {
  var column = d3.selectAll(".g-mentions")
      .data(mentions);

  column.select(".g-truncated")
      .style("display", function(d) { return d.truncated ? "block" : null; });

  var mention = column.selectAll(".g-mention")
      .data(groupMentionsBySpeaker, function(d) { return d.key; });

  mention.exit().remove();

  mention.selectAll("p")
      .remove();

  var mentionEnter = mention.enter().insert("div", ".g-truncated")
      .attr("class", "g-mention");

  mentionEnter.append("div")
      .attr("class", "g-speaker")
      .text(function(d) { var s = data.speakers[d.key]; return s ? s.name : d.key; });

  mentionEnter.append("div")
      .attr("class", "g-speaker-title")
      .text(function(d) { var s = data.speakers[d.key]; return s && s.title; });

  mention
      .sort(function(a, b) { return b.values.length - a.values.length; });

  var p = mention.selectAll("p")
      .data(function(d) { return d.values; })
    .enter().append("p")
      .html(function(d) { return d.section.speech.text.substring(d.start, d.end).replace(d.topic.re, "<a>$1</a>"); });

  if (activeTopic) {
    p.attr("class", "g-hover");
  } else {
    p.each(function(d) {
      d3.select(this).selectAll("a")
          .datum(d.topic)
          .attr("href", "#" + encodeURIComponent(d.topic.name))
          .call(linkTopic);
    });
  }
}

// Bind the arrow path elements with their associated topic.
function updateArrows() {
  arrow = arrow.data(
      data.topics.filter(function(d) { return d.arrow; }),
      function(d) { return this.id ? this.id.substring(8) : d.arrow; });
}

// Return a random sample of mentions per party, one per topic.
// Mentions are returned in chronological order.
function sampleMentions() {
  return data.parties.map(function(party, i) {
    return data.topics
        .map(function(d) { return d.parties[i].mentions; })
        .filter(function(d) { return d.length; })
        .map(function(d) { return d[Math.floor(Math.random() * d.length)]; })
        .sort(orderMentions);
  });
}

// Return displayable mentions per party for the specified topic.
// If too many, a random sample of matching mentions is returned.
// Mentions are returned in chronological order.
function findMentions(topic) {
  return data.parties.map(function(party, i) {
    var mentions = topic.parties[i].mentions;
    if (mentions.length > maxMentions) {
      shuffle(mentions).length = maxMentions;
      mentions.sort(orderMentions);
      mentions.truncated = true;
    }
    return mentions;
  });
}

// Group mentions by speaker, collapse overlapping excerpts.
function groupMentionsBySpeaker(mentions) {
  return d3.nest()
      .key(function(d) { return d.section.speaker; })
      .rollup(collapseMentions)
      .entries(mentions);
}

// Given an array of mentions, computes the start and end point of the context
// excerpt, and then collapses any overlapping excerpts.
function collapseMentions(mentions) {
  var sentenceRe = /([!?.)]+)\s+/g, // sentence splitting requires NLP
      i,
      n = mentions.length,
      d0,
      d1;

  // First compute the excerpt contexts.
  for (i = 0; i < n; ++i) {
    d0 = mentions[i];
    d0.start = excerptStart(d0);
    d0.end = excerptEnd(d0);
  }

  // Then collapse any overlapping excerpts (from the same speech).
  for (i = 1, d1 = mentions[0]; i < n; ++i) {
    d0 = d1;
    d1 = mentions[i];
    if (d1.section.speech.id === d0.section.speech.id
        && d1.start >= d0.start
        && d1.start < d0.end) {
      d1.start = -1;
      d0.end = d1.end;
      d1 = d0;
    }
  }

  // Returns the start index of the excerpt for the specified mention.
  function excerptStart(mention) {
    var i = sentenceRe.lastIndex = Math.max(mention.section.i, mention.i - 80), match;
    while (match = sentenceRe.exec(mention.section.speech.text)) {
      if (match.index < mention.i - 20) return match.index + match[0].length;
      if (i <= mention.section.i) break;
      sentenceRe.lastIndex = i = Math.max(mention.section.i, i - 20);
    }
    return mention.section.i;
  }

  // Returns the end index of the excerpt for the specified mention.
  function excerptEnd(mention) {
    var i = mention.section.j, match;
    sentenceRe.lastIndex = mention.j + 40;
    match = sentenceRe.exec(mention.section.speech.text);
    return match ? Math.min(match.index + match[1].length, i) : i;
  }

  return mentions.filter(function(d) { return d.start >= 0; });
}

// Orders mentions chronologically: by speech and position within speech.
function orderMentions(a, b) {
  return a.section.speech.id - b.section.speech.id || a.i - b.i;
}

// Assign event handlers to topic links.
function linkTopic(a) {
  a   .on("click", click)
      .on("mouseover", mouseover)
      .on("mouseout", mouseout);
}

// Returns the topic matching the specified name, approximately.
// If no matching topic is found, returns undefined.
function findTopic(name) {
  for (var i = 0, n = data.topics.length, t; i < n; ++i) {
    if ((t = data.topics[i]).name === name || new RegExp("^" + (t = data.topics[i]).re.source + "$", "i").test(name)) {
      return t;
    }
  }
}

// Returns the topic matching the specified name, approximately.
// If no matching topic is found, a new one is created.
function findOrAddTopic(name) {
  var topic = findTopic(name);
  if (!topic) {
    topic = data.topic(name.substring(0, 1).toUpperCase() + name.substring(1));
    topic.y = 0;
    updateTopics(data.topics);
  }
  return topic;
}

// Simulate forces and update node and label positions on tick.
function tick(e) {
  node
      .each(bias(e.alpha * 105))
      .each(collide(.5))
      .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });

  label
      .style("left", function(d) { return (d.x - d.dx / 2) + "px"; })
      .style("top", function(d) { return (d.y - d.dy / 2) + "px"; });

  arrow.style("stroke-opacity", function(d) {
    var dx = d.x - d.cx, dy = d.y - d.cy;
    return dx * dx + dy * dy < d.r * d.r ? 1: 0;
  });
}

// A left-right bias causing topics to orient by party preference.
function bias(alpha) {
  return function(d) {
    d.x += d.bias * alpha;
  };
}

function rotate() {
	return function(d) {
	var c = Math.cos(Math.PI/8.);
	var s = Math.sin(Math.PI/8.);
	
	d.x -= width/2.;
	d.y -= height/2.
	
	var n_x = d.x*c - d.y*s;
	var n_y = d.x*s + d.y*c;
	
	d.x = n_x + width/2.;
	d.y = n_y + height/2.;
	};
}

// Resolve collisions between nodes.
function collide(alpha) {
  var q = d3.geom.quadtree(data.topics);
  return function(d) {
    var r = d.cr + maxRadius + collisionPadding,
        nx1 = d.x - r,
        nx2 = d.x + r,
        ny1 = d.y - r,
        ny2 = d.y + r;
    q.visit(function(quad, x1, y1, x2, y2) {
      if (quad.point && (quad.point !== d) && d.other !== quad.point && d !== quad.point.other) {
        var x = d.x - quad.point.x,
            y = d.y - quad.point.y,
            l = Math.sqrt(x * x + y * y),
            r = d.cr + quad.point.r + collisionPadding;
        if (l < r) {
          l = (l - r) / l * alpha;
          d.x -= x *= l;
          d.y -= y *= l;
          quad.point.x += x;
          quad.point.y += y;
        }
      }
      return x1 > nx2 || x2 < nx1 || y1 > ny2 || y2 < ny1;
    });
  };
}

// Fisher–Yates shuffle.
function shuffle(array) {
  var m = array.length, t, i;
  while (m) {
    i = Math.floor(Math.random() * m--);
    t = array[m];
    array[m] = array[i];
    array[i] = t;
  }
  return array;
}

// Given two quantities a and b, returns the fraction to split the circle a + b.
function fraction(a, b) {
  var k = a / (a + b);
  if (k > 0 && k < 1) {
    var t0, t1 = Math.pow(12 * k * Math.PI, 1 / 3);
    for (var i = 0; i < 10; ++i) { // Solve for theta numerically.
      t0 = t1;
      t1 = (Math.sin(t0) - t0 * Math.cos(t0) + 2 * k * Math.PI) / (1 - Math.cos(t0));
    }
    k = (1 - Math.cos(t1 / 2)) / 2;
  }
  return k;
}

// Update the active topic on hashchange, perhaps creating a new topic.
function hashchange() {
  var name = decodeURIComponent(location.hash.substring(1)).trim();
  updateActiveTopic(name && name != "!" ? findOrAddTopic(name) : null);
}

// Trigger a hashchange on submit.
function submit() {
  var name = this.search.value.trim();
  location.hash = name ? encodeURIComponent(name) : "!";
  this.search.value = "";
  d3.event.preventDefault();
}

// Clear the active topic when clicking on the chart background.
function clear() {
  location.replace("#!");
}

// Rather than flood the browser history, use location.replace.
function click(d) {
  location.replace("#" + encodeURIComponent(d === activeTopic ? "!" : d.name));
  // PFS: 12/05/2015
  parent.resizeIframeByHeight(parent.document.getElementsByName('iframe_a')[0],document.getElementById('interactiveABC').scrollHeight);
  d3.event.preventDefault();
}

// When hovering the label, highlight the associated node and vice versa.
// When no topic is active, also cross-highlight with any mentions in excerpts.
function mouseover(d) {
  node.classed("g-hover", function(p) { return p === d; });
  if (!activeTopic) d3.selectAll(".g-mention p").classed("g-hover", function(p) { return p.topic === d; });
}

// When hovering the label, highlight the associated node and vice versa.
// When no topic is active, also cross-highlight with any mentions in excerpts.
function mouseout(d) {
  node.classed("g-hover", false);
  if (!activeTopic) d3.selectAll(".g-mention p").classed("g-hover", false);
}

})();
